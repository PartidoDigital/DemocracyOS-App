mixin comment-form
  form.comment-form(method='post', action='/api/topic/#{topic.id}/comment', autovalidate='autovalidate', autosubmit='autosubmit')
    h5= expert ? t('comments.your-expert-argument') : t('comments.your-argument')
      a.pull-right(href='/help/markdown', target='_blank') #{t('markdown.comments.formatting-help')}
    p
      textarea(name='text', rows='4', validate='required max-length:4096', tabindex=1)
      ul.form-messages
    input.btn.form-submit.pull-right(type='submit', tabindex=2, value=t('comments.send'))
    a(href='#', tabindex=3).btn.btn-link.cancel-new-comment.pull-right=t('common.cancel')
    ul.form-messages
  button.btn.btn-block.new-comment.hide
    i.icon-plus
    =t('comments.new.argument')

- var logged = user.logged()
- var expert = logged ? topic.tag.expert === user.id : false

.comments
  .inner-container.expert-comments
    h4=expert ? t('comments.your.expert.arguments') : t('comments.expert.arguments')
    ul.media-list.expert-comments-list
    - if (expert)
      +comment-form
  .inner-container.my-comments(class=expert ? 'hide' : '')
    h4=t('comments.your.arguments')
    ul.media-list.my-comments-list
    +comment-form
  .inner-container.all-comments
    h4=t('comments.arguments')
    ul.media-list.comments-list
    btn.btn.btn-primary.btn-block.load-comments.hide=t('comments.load-more')
    - if (!logged)
      .box
        p.text-mute= t('comments.sign-in-required')
          | .&nbsp;
          a(href="/signin")= t('signin.login')
          | &nbsp;#{t('common.or')}&nbsp;
          - var signupUrl = '/signup?reference=' + reference
          a(href=signupUrl)= t('signin.signup')
          | .